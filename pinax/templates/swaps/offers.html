{% extends "swaps/base.html" %}

{% load i18n %}
{% load gravatar %}
{% load humanize %}
{% load pagination_tags %}
{% load tagging_tags %}
{% load wiki %}
{% load markup %}
{% load restructuredtext %}
{% load threadedcommentstags %}

{% block head_title %}{% blocktrans %}All Open Offers{% endblocktrans %}{% endblock %}

{% block body %}
    <p><span class="warning">Note</span>: this is an <b>experimental</b> feature that is subject to massive change at any time.</p>
    
    <h1>{% trans "All Open Offers" %}</h1>
    
    
    {% if offers %}

        
        {% autopaginate offers %}
       		<table class="bookmarks">     
            {% for offer in offers %}
                <tr class="{% cycle odd,even %}">
					<td>
						<h2><a href="{{ offer.get_absolute_url }}">{{ offer.short_description }}</a></h2>
						<p>
							Offering: {{ offer.offering|truncatewords:15 }}
						</p>
						<p>
							Want: {{ offer.want|truncatewords:15 }}
						</p>
					</td>
					<td>
						{% ifnotequal user offer.offerer %}
							<form action="{% url propose_swap offer.id %}" method="GET">
								<input type="submit" value="{% trans "Propose Swap" %}" />
							</form>
						{% endifnotequal %}
					</td>
                    <td class="meta">
                        {% gravatar offer.offerer 40 %}
                        <p><b>Offered by:</b><br /><a href="{% url profiles.views.profile offer.offerer.username %}">{{ offer.offerer.username }}</a> on {{ offer.offered_time|date }}</p>
                        <div class="blog-tags">
                            <p><img src="/site_media/tags.png" border="0" class="noborder" align="absmiddle" /> 
                            {% tags_for_object offer as tags %}
                            {% for tag in tags %}
                                <a href="/tags/{{ tag }}">{{ tag }}</a>
                            {% endfor %}
                        </div>
                    </td>
                </tr>
            {% endfor %}
			</table>
        
        {% paginate %}
    
    {% else %}
        No open offers.
    {% endif %}
    
{% endblock %}