{% load i18n %}
{% load oembed_tags %}
{% load pagination_tags %}
{% load captureas_tag %}

{% oembed %}
    {% autopaginate tweets %}
    
    {% if tweets %}
        {% for tweet in tweets %}
            <div class="tweet" id="t{{ tweet.id }}">
                {% if prefix_sender %}<a href="{% url profiles.views.profile tweet.sender %}"><b>{{ tweet.sender }}</b></a>{% endif %}
                {{ tweet.html|safe|urlize }}
                <span class="timesince">{% blocktrans with tweet.sent|timesince as tweet_age %}{{ tweet_age }} ago{% endblocktrans %}</span>
                <a class="reply" href="{% url zwitschern.views.personal %}?reply={{ tweet.sender }}">{% trans "reply" %}</a>
             </div>
        {% endfor %}
    {% else %}
        {% if are_mine %}
            {% captureas tweets_url %}{% url zwitschern.views.personal %}{% endcaptureas %}
            <p>{% blocktrans %}You haven't posted any <a href="{{ tweets_url }}">tweets</a> yet.{% endblocktrans %}</p>
        {% else %}
            <p>{% blocktrans %}There are currently no tweets to be listed.{% endblocktrans %}</p>
        {% endif %}
    {% endif %}
    
    {% paginate %}
    
{% endoembed %}
