{% extends "wiki/base.html" %}

{% load i18n %}
{% load wiki %}
{% load markup %}
{% load switchcase %}

{% block head_title %}Pinax : {{ article.title }} {% endblock %}

{% block body %}
    <h1><a href="{{ article.get_absolute_url }}" rel="bookmark">{{ article.title }}</a></h1>
    
    {% if not article.id %}
    <p>{% trans "This article does not exist." %}
        <a href="{% url wiki_edit_article article.title %}" {% trans ">Create it now</a>?" %}</p>
    {% endif %}
    {# Yes, the following mess is necessary #}
    {% with article.content as content %}
        {% switch article.markup %}
            {% case 'rst' %} {{ content|restructuredtext|wikiwords }} {% endcase %}
            {% case 'mrk' %} {{ content|force_escape|markdown|wikiwords }} {% endcase %}
            {% case 'txl' %} {{ content|force_escape|textile|wikiwords }} {% endcase %}
            {% case '' %} {{ content|force_escape|wikiwords|linebreaks|safe }} {% endcase %}
        {% endswitch %}
    {% endwith %}
{% endblock %}

{% block subnav_extraitems %}
    {% if article.id %}
    <li><a href="{% url wiki_edit_article article.title %}">{% trans "Edit this article" %}</a> </li>
    <li><a href="{% url wiki_article_history article.title,1 %}">{% trans "Editing history" %}</a> </li>
    {% else %}
    <li><a href="{% url wiki_edit_article article.title %}">{% trans "Create this article" %}</a></li>
    {% endif %}
{% endblock %}