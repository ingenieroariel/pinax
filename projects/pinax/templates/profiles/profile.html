{% extends "site_base.html" %}

{% block head_title %}Pinax : Profile for {{ other_user }}{% endblock %}

{% block rtab_id %}profile_tab{% endblock %}

{% block body %}
<h1>Profile for {{ other_user }}</h1>

<p>This is really just a placeholder at the moment.</p>

{% if user.is_authenticated %}
{% ifequal user other_user %}
<p>This is you.</p>
<h2>Your Friends</h2>
{% if other_friends %}
<ul>
{% for friendship in other_friends %}
    <li><a href="{% url profiles.views.profile friendship.friend.username %}">{{ friendship.friend }}</a></li>
{% endfor %}
</ul>
{% else %}
<p>None. You should look at the list of <a href="/profiles/">profiles</a> and see if there's anyone you know.</p>
{% endif %}
{% else %}
{% if is_friend %}
<p>You are friends with {{ other_user }}.</p>
<h2>{{ other_user }}'s Friends</h2>
<ul>
{% for friendship in other_friends %}
    <li><a href="{% url profiles.views.profile friendship.friend.username %}">{{ friendship.friend }}</a></li>
{% endfor %}
</ul>

{% else %}
<h2>Add As Friend</h2>
{% if previous_invitations_from %}
<p>{{ other_user }} has already requested friendship.</p>
{% for invitation in previous_invitations_from %}
<div class="friendship_request">
    <p>{{ invitation.message }}</p>
    <form style="display: none;" id="invitation_{{ invitation.id }}" method="post" action="">
        <input type="hidden" name="invitation" value="{{ invitation.id }}"/>
        <input type="hidden" name="action" value="accept"/>
    </form>
    <p><a href="#" onclick="$('#invitation_{{ invitation.id }}').submit()">accept</a></p>
</div>
{% endfor %}
{% else %}
{% if previous_invitations_to %}
<p>Friendship request sent.</p>
{% else %}
<form method="POST" action="">
    <table>
    {{ invite_form.as_table }}
    <tr><td></td><td><input type="submit" name="action" value="invite" /> {{ other_user }} to be a friend.</td></tr>
    </table>
</form>
{% endif %}
{% endif %}
{% endif %}
{% endifequal %}
{% else %}
<p><a href="/account/signup/">Sign up</a> and <a href="/account/login/">log in </a> to add this person as a friend.</p>
{% endif %}

{% endblock %}
